openapi: 3.0.0
info:
  title: Mini Notion API
  version: 0.0.0
servers:
- description: Production server
  url: https://api.mini-notion.com
- description: Development server
  url: http://localhost:8080
tags:
- name: Accounts
- name: Templates
- name: Notes
paths:
  /api/accounts/auth:
    post:
      description: OAuth認証（内部処理）
      operationId: Accounts_createOrGetAccount
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Models.CreateOrGetAccountRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.AccountResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.BadRequestError"
          description: An unexpected error response.
      summary: Create or get account via OAuth
      tags:
      - Accounts
  /api/accounts/me:
    get:
      description: 現在のアカウント取得
      operationId: Accounts_getCurrentAccount
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.AccountResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.UnauthorizedError"
          description: An unexpected error response.
      summary: Get current account
      tags:
      - Accounts
  /api/accounts/{accountId}:
    get:
      description: アカウント詳細取得
      operationId: Accounts_getAccountById
      parameters:
      - explode: false
        in: path
        name: accountId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.AccountResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Accounts_getAccountById_default_response"
          description: An unexpected error response.
      summary: Get account by ID
      tags:
      - Accounts
  /api/notes:
    get:
      description: ノート一覧取得
      operationId: Notes_listNotes
      parameters:
      - description: タイトルキーワード検索
        explode: false
        in: query
        name: q
        required: false
        schema:
          type: string
        style: form
      - description: ステータスフィルター
        explode: false
        in: query
        name: status
        required: false
        schema:
          $ref: "#/components/schemas/Models.NoteStatus"
        style: form
      - description: テンプレートIDフィルター
        explode: false
        in: query
        name: templateId
        required: false
        schema:
          type: string
        style: form
      - description: 所有者IDフィルター
        explode: false
        in: query
        name: ownerId
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Models.NoteResponse"
                type: array
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.UnauthorizedError"
          description: An unexpected error response.
      summary: Get notes list
      tags:
      - Notes
    post:
      description: ノート作成
      operationId: Notes_createNote
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Models.CreateNoteRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.NoteResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_createNote_default_response"
          description: An unexpected error response.
      summary: Create note
      tags:
      - Notes
  /api/notes/{noteId}:
    delete:
      description: ノート削除
      operationId: Notes_deleteNote
      parameters:
      - explode: false
        in: path
        name: noteId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.SuccessResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_deleteNote_default_response"
          description: An unexpected error response.
      summary: Delete note
      tags:
      - Notes
    get:
      description: ノート詳細取得
      operationId: Notes_getNoteById
      parameters:
      - explode: false
        in: path
        name: noteId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.NoteResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Accounts_getAccountById_default_response"
          description: An unexpected error response.
      summary: Get note by ID
      tags:
      - Notes
    put:
      description: ノート更新
      operationId: Notes_updateNote
      parameters:
      - explode: false
        in: path
        name: noteId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Models.UpdateNoteRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.NoteResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_updateNote_default_response"
          description: An unexpected error response.
      summary: Update note
      tags:
      - Notes
  /api/notes/{noteId}/publish:
    post:
      description: ノート公開
      operationId: Notes_publishNote
      parameters:
      - explode: false
        in: path
        name: noteId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.NoteResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_updateNote_default_response"
          description: An unexpected error response.
      summary: Publish note
      tags:
      - Notes
  /api/notes/{noteId}/unpublish:
    post:
      description: ノート公開取り消し
      operationId: Notes_unpublishNote
      parameters:
      - explode: false
        in: path
        name: noteId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.NoteResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_updateNote_default_response"
          description: An unexpected error response.
      summary: Unpublish note
      tags:
      - Notes
  /api/templates:
    get:
      description: テンプレート一覧取得
      operationId: Templates_listTemplates
      parameters:
      - description: テンプレート名のキーワード検索
        explode: false
        in: query
        name: q
        required: false
        schema:
          type: string
        style: form
      - description: 所有者IDフィルター
        explode: false
        in: query
        name: ownerId
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Models.TemplateResponse"
                type: array
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.UnauthorizedError"
          description: An unexpected error response.
      summary: Get templates list
      tags:
      - Templates
    post:
      description: テンプレート作成
      operationId: Templates_createTemplate
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Models.CreateTemplateRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.TemplateResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_createNote_default_response"
          description: An unexpected error response.
      summary: Create template
      tags:
      - Templates
  /api/templates/{templateId}:
    delete:
      description: テンプレート削除
      operationId: Templates_deleteTemplate
      parameters:
      - explode: false
        in: path
        name: templateId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.SuccessResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_updateNote_default_response"
          description: An unexpected error response.
      summary: Delete template
      tags:
      - Templates
    get:
      description: テンプレート詳細取得
      operationId: Templates_getTemplateById
      parameters:
      - explode: false
        in: path
        name: templateId
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.TemplateResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Accounts_getAccountById_default_response"
          description: An unexpected error response.
      summary: Get template by ID
      tags:
      - Templates
    put:
      description: テンプレート更新
      operationId: Templates_updateTemplate
      parameters:
      - explode: false
        in: path
        name: templateId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Models.UpdateTemplateRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Models.TemplateResponse"
          description: The request has succeeded.
        default:
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notes_updateNote_default_response"
          description: An unexpected error response.
      summary: Update template
      tags:
      - Templates
components:
  schemas:
    Models.Account:
      description: アカウント情報
      properties:
        id:
          description: アカウントID
          type: string
        email:
          description: メールアドレス
          type: string
        firstName:
          description: 名前
          type: string
        lastName:
          description: 苗字
          type: string
        fullName:
          description: フルネーム
          type: string
        thumbnail:
          description: プロフィール画像URL
          type: string
        lastLoginAt:
          description: 最終ログイン日時
          format: date-time
          type: string
        createdAt:
          description: 作成日時
          format: date-time
          type: string
        updatedAt:
          description: 更新日時
          format: date-time
          type: string
      required:
      - createdAt
      - email
      - firstName
      - fullName
      - id
      - lastLoginAt
      - lastName
      - updatedAt
      type: object
    Models.AccountResponse:
      description: アカウントレスポンス
      example:
        firstName: firstName
        lastName: lastName
        createdAt: 2000-01-23T04:56:07.000+00:00
        thumbnail: thumbnail
        lastLoginAt: 2000-01-23T04:56:07.000+00:00
        fullName: fullName
        id: id
        email: email
        updatedAt: 2000-01-23T04:56:07.000+00:00
      properties:
        id:
          description: アカウントID
          type: string
        email:
          description: メールアドレス
          type: string
        firstName:
          description: 名前
          type: string
        lastName:
          description: 苗字
          type: string
        fullName:
          description: フルネーム
          type: string
        thumbnail:
          description: プロフィール画像URL
          type: string
        lastLoginAt:
          description: 最終ログイン日時
          format: date-time
          type: string
        createdAt:
          description: 作成日時
          format: date-time
          type: string
        updatedAt:
          description: 更新日時
          format: date-time
          type: string
      required:
      - createdAt
      - email
      - firstName
      - fullName
      - id
      - lastLoginAt
      - lastName
      - updatedAt
      type: object
    Models.AccountSummary:
      description: 簡易アカウント情報（他のレスポンスに埋め込まれる）
      properties:
        id:
          description: アカウントID
          type: string
        firstName:
          description: 名前
          type: string
        lastName:
          description: 苗字
          type: string
        thumbnail:
          description: プロフィール画像URL
          type: string
      required:
      - firstName
      - id
      - lastName
      type: object
    Models.BadRequestError:
      description: Bad Request エラー
      example:
        code: BAD_REQUEST
        details: ""
        message: message
      properties:
        code:
          enum:
          - BAD_REQUEST
          type: string
        message:
          type: string
        details: {}
      required:
      - code
      - message
      type: object
    Models.CreateFieldRequest:
      description: テンプレートフィールド作成リクエスト
      properties:
        label:
          description: ラベル
          minLength: 1
          type: string
        order:
          description: 表示順序
          format: int32
          minimum: 0
          type: integer
        isRequired:
          description: 必須フラグ
          type: boolean
      required:
      - isRequired
      - label
      - order
      type: object
    Models.CreateNoteRequest:
      description: ノート作成リクエスト
      properties:
        title:
          description: タイトル
          maxLength: 100
          minLength: 1
          type: string
        templateId:
          description: テンプレートID
          format: uuid
          type: string
        ownerId:
          description: 所有者ID
          format: uuid
          type: string
        sections:
          description: セクション（オプション）
          items:
            $ref: "#/components/schemas/Models.CreateSectionRequest"
          type: array
      required:
      - ownerId
      - templateId
      - title
      type: object
    Models.CreateOrGetAccountRequest:
      description: OAuth認証リクエスト
      properties:
        email:
          description: メールアドレス
          type: string
        name:
          description: 名前
          type: string
        provider:
          description: "プロバイダー（例: google）"
          type: string
        providerAccountId:
          description: プロバイダーのアカウントID
          type: string
        thumbnail:
          description: プロフィール画像URL
          type: string
      required:
      - email
      - name
      - provider
      - providerAccountId
      type: object
    Models.CreateSectionRequest:
      description: セクション作成リクエスト
      properties:
        fieldId:
          description: フィールドID
          type: string
        content:
          description: 内容
          type: string
      required:
      - content
      - fieldId
      type: object
    Models.CreateTemplateRequest:
      description: テンプレート作成リクエスト
      properties:
        name:
          description: テンプレート名
          maxLength: 100
          minLength: 1
          type: string
        ownerId:
          description: 所有者ID
          format: uuid
          type: string
        fields:
          description: フィールド一覧
          items:
            $ref: "#/components/schemas/Models.CreateFieldRequest"
          type: array
      required:
      - fields
      - name
      - ownerId
      type: object
    Models.ErrorResponse:
      description: 共通エラーレスポンス
      properties:
        code:
          description: エラーコード
          type: string
        message:
          description: エラーメッセージ
          type: string
        details:
          description: 詳細情報（オプション）
      required:
      - code
      - message
      type: object
    Models.Field:
      description: テンプレートフィールド
      example:
        isRequired: true
        id: id
        label: label
        order: 0
      properties:
        id:
          description: フィールドID
          type: string
        label:
          description: ラベル
          minLength: 1
          type: string
        order:
          description: 表示順序
          format: int32
          minimum: 0
          type: integer
        isRequired:
          description: 必須フラグ
          type: boolean
      required:
      - id
      - isRequired
      - label
      - order
      type: object
    Models.ForbiddenError:
      description: Forbidden エラー
      properties:
        code:
          enum:
          - FORBIDDEN
          type: string
        message:
          type: string
      required:
      - code
      - message
      type: object
    Models.NotFoundError:
      description: Not Found エラー
      example:
        code: NOT_FOUND
        message: message
      properties:
        code:
          enum:
          - NOT_FOUND
          type: string
        message:
          type: string
      required:
      - code
      - message
      type: object
    Models.NoteFilters:
      description: ノートフィルター（クエリパラメータ）
      properties:
        q:
          description: タイトルキーワード検索
          type: string
        status:
          allOf:
          - $ref: "#/components/schemas/Models.NoteStatus"
          description: ステータスフィルター
        templateId:
          description: テンプレートIDフィルター
          type: string
        ownerId:
          description: 所有者IDフィルター
          type: string
      type: object
    Models.NoteResponse:
      description: ノートレスポンス
      example:
        owner: ""
        createdAt: 2000-01-23T04:56:07.000+00:00
        templateName: templateName
        id: id
        title: title
        templateId: templateId
        ownerId: ownerId
        sections:
        - isRequired: true
          fieldLabel: fieldLabel
          id: id
          content: content
          fieldId: fieldId
        - isRequired: true
          fieldLabel: fieldLabel
          id: id
          content: content
          fieldId: fieldId
        status: ""
        updatedAt: 2000-01-23T04:56:07.000+00:00
      properties:
        id:
          description: ノートID
          type: string
        title:
          description: タイトル
          type: string
        templateId:
          description: テンプレートID
          type: string
        templateName:
          description: テンプレート名
          type: string
        ownerId:
          description: 所有者ID
          type: string
        owner:
          allOf:
          - $ref: "#/components/schemas/Models.AccountSummary"
          description: 所有者情報
        status:
          allOf:
          - $ref: "#/components/schemas/Models.NoteStatus"
          description: ステータス
        sections:
          description: セクション
          items:
            $ref: "#/components/schemas/Models.Section"
          type: array
        createdAt:
          description: 作成日時
          format: date-time
          type: string
        updatedAt:
          description: 更新日時
          format: date-time
          type: string
      required:
      - createdAt
      - id
      - owner
      - ownerId
      - sections
      - status
      - templateId
      - templateName
      - title
      - updatedAt
      type: object
    Models.NoteStatus:
      description: ノートのステータス
      enum:
      - Draft
      - Publish
      type: string
    Models.Section:
      description: セクション（ノートの各項目）
      example:
        isRequired: true
        fieldLabel: fieldLabel
        id: id
        content: content
        fieldId: fieldId
      properties:
        id:
          description: セクションID
          type: string
        fieldId:
          description: フィールドID
          type: string
        fieldLabel:
          description: フィールドラベル
          type: string
        content:
          description: 内容
          type: string
        isRequired:
          description: 必須項目かどうか
          type: boolean
      required:
      - content
      - fieldId
      - fieldLabel
      - id
      - isRequired
      type: object
    Models.SuccessResponse:
      description: 成功レスポンス（削除など）
      example:
        success: true
      properties:
        success:
          type: boolean
      required:
      - success
      type: object
    Models.TemplateResponse:
      description: テンプレートレスポンス
      example:
        owner: ""
        name: name
        id: id
        ownerId: ownerId
        fields:
        - isRequired: true
          id: id
          label: label
          order: 0
        - isRequired: true
          id: id
          label: label
          order: 0
        isUsed: true
        updatedAt: 2000-01-23T04:56:07.000+00:00
      properties:
        id:
          description: テンプレートID
          type: string
        name:
          description: テンプレート名
          type: string
        ownerId:
          description: 所有者ID
          type: string
        owner:
          allOf:
          - $ref: "#/components/schemas/Models.AccountSummary"
          description: 所有者情報
        fields:
          description: フィールド一覧
          items:
            $ref: "#/components/schemas/Models.Field"
          type: array
        updatedAt:
          description: 更新日時
          format: date-time
          type: string
        isUsed:
          description: 使用中フラグ
          type: boolean
      required:
      - fields
      - id
      - isUsed
      - name
      - owner
      - ownerId
      - updatedAt
      type: object
    Models.UnauthorizedError:
      description: Unauthorized エラー
      example:
        code: UNAUTHORIZED
        message: message
      properties:
        code:
          enum:
          - UNAUTHORIZED
          type: string
        message:
          type: string
      required:
      - code
      - message
      type: object
    Models.UpdateFieldRequest:
      description: フィールド更新リクエスト
      properties:
        id:
          description: フィールドID（既存フィールドの場合は必須）
          type: string
        label:
          description: ラベル
          minLength: 1
          type: string
        order:
          description: 表示順序
          format: int32
          minimum: 0
          type: integer
        isRequired:
          description: 必須フラグ
          type: boolean
      required:
      - isRequired
      - label
      - order
      type: object
    Models.UpdateNoteRequest:
      description: ノート更新リクエスト
      properties:
        id:
          description: ノートID
          type: string
        title:
          description: タイトル
          maxLength: 100
          minLength: 1
          type: string
        sections:
          description: セクション
          items:
            $ref: "#/components/schemas/Models.UpdateSectionRequest"
          type: array
      required:
      - id
      - sections
      - title
      type: object
    Models.UpdateSectionRequest:
      description: セクション更新リクエスト
      properties:
        id:
          description: セクションID
          type: string
        content:
          description: 内容
          type: string
      required:
      - content
      - id
      type: object
    Models.UpdateTemplateRequest:
      description: テンプレート更新リクエスト
      properties:
        id:
          description: テンプレートID
          type: string
        name:
          description: テンプレート名
          maxLength: 100
          minLength: 1
          type: string
        fields:
          description: フィールド一覧
          items:
            $ref: "#/components/schemas/Models.UpdateFieldRequest"
          type: array
      required:
      - fields
      - id
      - name
      type: object
    Accounts_getAccountById_default_response:
      anyOf:
      - $ref: "#/components/schemas/Models.NotFoundError"
      - $ref: "#/components/schemas/Models.UnauthorizedError"
    Notes_createNote_default_response:
      anyOf:
      - $ref: "#/components/schemas/Models.BadRequestError"
      - $ref: "#/components/schemas/Models.UnauthorizedError"
    Notes_updateNote_default_response:
      anyOf:
      - $ref: "#/components/schemas/Models.NotFoundError"
      - $ref: "#/components/schemas/Models.ForbiddenError"
      - $ref: "#/components/schemas/Models.BadRequestError"
      - $ref: "#/components/schemas/Models.UnauthorizedError"
    Notes_deleteNote_default_response:
      anyOf:
      - $ref: "#/components/schemas/Models.NotFoundError"
      - $ref: "#/components/schemas/Models.ForbiddenError"
      - $ref: "#/components/schemas/Models.UnauthorizedError"
